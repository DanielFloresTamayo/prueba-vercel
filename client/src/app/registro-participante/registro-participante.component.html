<div class="registro-container">
    <h2 class="mb-4 text-center">Registro de Participante</h2>

    <!-- Formulario de registro -->
    <form (ngSubmit)="onRegister(registroForm)" #registroForm="ngForm" class="p-4 border rounded bg-light">
        <div class="form-group mb-3">
            <label for="correo">Correo Personal</label>             
            <input type="email" id="correo" name="correo" class="form-control" 
                [(ngModel)]="correo"
                #correoInput="ngModel" 
                [ngClass]="{'is-invalid': correoInput.invalid && correoInput.touched}" 
                required pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" 
                required minlength="2" maxlength="35" placeholder="Ingresa tu correo" />
            <div *ngIf="correoInput.invalid && correoInput.touched" class="text-danger small mt-1">
                Ingresa un correo válido
            </div>
        </div>

        <div class="form-group mb-3">
            <label for="nombres">Nombres</label>
            <input type="text" id="nombres" name="nombres" class="form-control" 
                [(ngModel)]="nombres"
                #nombresInput="ngModel"  
                [ngClass]="{'is-invalid': nombresInput.invalid && nombresInput.touched}"
                pattern="^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$" required minlength="2" maxlength="30" placeholder="Ingresa tus nombres" />
            <div *ngIf="nombresInput.invalid && nombresInput.touched" class="text-danger small mt-1">
                Los nombres deben tener al menos 2 caracteres, no debe contener números.
            </div>
        </div>

        <div class="form-group mb-3">
            <label for="apellidos">Apellidos</label>
            <input type="text" id="apellidos" name="apellidos" class="form-control" 
                [(ngModel)]="apellidos"
                #apellidosInput="ngModel" 
                [ngClass]="{'is-invalid': apellidosInput.invalid && apellidosInput.touched}"
                pattern="^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$" required minlength="2" maxlength="30" placeholder="Ingresa tus apellidos" />
            <div *ngIf="apellidosInput.invalid && apellidosInput.touched"  class="text-danger small mt-1" >
                Los apellidos deben tener al menos 2 caracteres, debe contener números.
            </div>
        </div>

        <div class="form-group mb-3">
            <label for="contrasena">Contraseña</label>
            <div class="input-group">
                <input [type]="showPassword ? 'text' : 'password'" id="contrasena" name="contrasena"
                    class="form-control" 
                    [(ngModel)]="contrasena" 
                    #contrasenaInput="ngModel" 
                    [ngClass]="{'is-invalid': contrasenaInput.invalid && contrasenaInput.touched}"
                    required minlength="8" maxlength="12" placeholder="Ingresa tu contraseña" />
                <div class="input-group-append">
                    <button type="button" class="btn btn-outline-secondary" (click)="togglePasswordVisibility()">
                        <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                    </button>
                </div>
                <!-- Alerta
                <div *ngIf="formSubmitted && registroForm.invalid" class="alert alert-danger mt-3">
                    Todos los campos deben ser completados correctamente.
                </div>-->
            </div>
            <div *ngIf="contrasenaInput.invalid && contrasenaInput.touched" class="text-danger small mt-1">
                La contraseña debe tener al menos 8 caracteres.
            </div>
        </div>
        <!-- Alerta para correo duplicado -->
        <div *ngIf="correoDuplicado" class="alert alert-warning mt-3">
            El correo ingresado ya está registrado. Intente con otro.
        </div>

        <div class="form-group text-center">
            <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="registroForm.invalid">
                <i class="fas fa-user-plus me-2"></i> Registrar
            </button>
        </div>
    </form>
</div>