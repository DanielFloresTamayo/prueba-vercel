<div class="password-card glass fade-in mx-auto">
  <h3 class="fw-bold mb-4 text-center">
    <i class="fas fa-key me-2"></i>Cambiar Contrase√±a
  </h3>

  <form (ngSubmit)="onSubmit()" [formGroup]="formPassword">
    <!-- üîí Contrase√±a actual -->
    <div class="mb-3 position-relative">
      <label class="form-label fw-semibold">Contrase√±a Actual</label>
      <input
        [type]="showCurrent ? 'text' : 'password'"
        formControlName="actual"
        class="form-control rounded-pill"
      />
      <i
        class="fas eye-icon"
        [ngClass]="showCurrent ? 'fa-eye-slash' : 'fa-eye'"
        (click)="toggleVisibility('actual')"
      ></i>
    </div>

    <!-- üÜï Nueva contrase√±a -->
    <div class="mb-3 position-relative">
      <label class="form-label fw-semibold">Nueva Contrase√±a</label>
      <input
        [type]="showNew ? 'text' : 'password'"
        formControlName="nueva"
        class="form-control rounded-pill"
        (input)="onNewPasswordInput()"
      />
      <i
        class="fas eye-icon"
        [ngClass]="showNew ? 'fa-eye-slash' : 'fa-eye'"
        (click)="toggleVisibility('nueva')"
      ></i>

      <div *ngIf="showRequirements" class="mt-2 ms-2">
        <small
          [class.text-success]="
            formPassword.get('nueva')?.value.length >= 8 &&
            formPassword.get('nueva')?.value.length <= 12
          "
          class="d-block"
        >
          ‚Ä¢ Entre 8 y 12 caracteres
        </small>
        <small [class.text-success]="hasUppercase()" class="d-block">
          ‚Ä¢ Al menos una may√∫scula
        </small>
        <small [class.text-success]="hasNumber()" class="d-block">
          ‚Ä¢ Al menos un n√∫mero
        </small>
        <small [class.text-success]="hasSpecialChar()" class="d-block">
          ‚Ä¢ Al menos un car√°cter especial (!#$%^&*)
        </small>
      </div>
    </div>

    <!-- üîÅ Confirmar nueva contrase√±a -->
    <div class="mb-3 position-relative">
      <label class="form-label fw-semibold">Confirmar Nueva Contrase√±a</label>
      <input
        [type]="showConfirm ? 'text' : 'password'"
        formControlName="confirmar"
        class="form-control rounded-pill"
      />
      <i
        class="fas eye-icon"
        [ngClass]="showConfirm ? 'fa-eye-slash' : 'fa-eye'"
        (click)="toggleVisibility('confirmar')"
      ></i>
    </div>

    <!-- üéØ Botones -->
    <div class="text-center mt-4">
      <button
        class="btn btn-primary animated-btn rounded-pill px-4 me-2"
        type="submit"
        [disabled]="formPassword.invalid"
      >
        <i class="fas fa-save me-2"></i>Actualizar
      </button>
      <button
        class="btn btn-outline-secondary cancel-btn rounded-pill px-4"
        type="button"
        (click)="resetForm()"
      >
        <i class="fas fa-undo me-2"></i>Cancelar
      </button>
    </div>
  </form>
</div>
